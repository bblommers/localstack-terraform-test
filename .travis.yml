language: python
python: "3.7"
go: "1.16"

cache:
  directories:
    - $HOME/.cache/pip
    - $HOME/.cache/localstack

install:
  - set -e # fail fast
  - mkdir -p $HOME/.cache/localstack
  - eval "$(gimme 1.16)" # install go 1.16
  - bin/install-aws-test
  - |
    (
      cd localstack
      make install
    )

script:
  - set -e # fail fast
  - ls -la $HOME/.cache/localstack
  - go version
  - ls -la localstack/.venv
